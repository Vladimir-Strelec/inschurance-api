<div class="contact-drawer" {% if is_mini %}id="contact-drawer-mini"{% else %}id="contact-drawer-main"{% endif %}>
  <form
    class="p-4 space-y-4"
    hx-post="{% url 'contact_api' %}"
    hx-target="closest .contact-drawer"
    hx-swap="outerHTML transition:none"
    hx-sync="closest form:drop"
    hx-disabled-elt="find button, find input:not([type='hidden']), find textarea"
    hx-headers='{"Idempotency-Key": "{{ uuid }}"}'
    method="POST"
  >
    {% csrf_token %}
    <input type="hidden" name="mini" value="{% if is_mini %}1{% else %}0{% endif %}">
    <input type="hidden" name="idempotency_key" value="{{ uuid }}">

    <input name="email" type="email" placeholder="Email" class="w-full border p-2 rounded" required>
    <input name="phone" type="tel" placeholder="Телефон" class="w-full border p-2 rounded" required>
    <textarea name="message" rows="4" placeholder="Сообщение" class="w-full border p-2 rounded"></textarea>

    <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-950">
      Отправить
    </button>
  </form>
</div>
